<!DOCTYPE html>
<html>
<head>
    <title>HTML Paint Program</title>
    <style>
        /* Add your custom styles here */
        canvas {
            border: 1px solid #000;
        }
    </style>
</head>
<body>
    <div>
        <button onclick="undo()">Undo</button>
        <button onclick="redo()">Redo</button>
        <label for="horizontalRes">Horizontal Resolution:</label>
        <input type="number" id="horizontalRes" value="800">
        <label for="verticalRes">Vertical Resolution:</label>
        <input type="number" id="verticalRes" value="600">
        <button onclick="changeResolution()">Change Resolution</button>
    </div>
    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const undoStack = [];
        const redoStack = [];

        // Initialize canvas size
        let resolution = {
            horizontal: parseInt(document.getElementById('horizontalRes').value),
            vertical: parseInt(document.getElementById('verticalRes').value)
        };
        canvas.width = resolution.horizontal;
        canvas.height = resolution.vertical;

        // Initialize drawing state
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;

        // Add event listeners
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        // Function to start drawing
        function startDrawing(e) {
            isDrawing = true;
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }

        // Function to draw on the canvas
        function draw(e) {
            if (!isDrawing) return;
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }

        // Function to stop drawing
        function stopDrawing() {
            isDrawing = false;
            saveState();
        }

        // Function to save the current state for undo/redo
        function saveState() {
            undoStack.push(canvas.toDataURL());
            redoStack.length = 0;
        }

        // Function to undo the last drawing action
        function undo() {
            if (undoStack.length === 0) return;
            redoStack.push(canvas.toDataURL());
            let img = new Image();
            img.onload = function () {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(img, 0, 0);
            };
            img.src = undoStack.pop();
        }

        // Function to redo the last undone drawing action
        function redo() {
            if (redoStack.length === 0) return;
            undoStack.push(canvas.toDataURL());
            let img = new Image();
            img.onload = function () {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(img, 0, 0);
            };
            img.src = redoStack.pop();
        }

        // Function to change the canvas resolution
        function changeResolution() {
            const newResolution = {
                horizontal: parseInt(document.getElementById('horizontalRes').value),
                vertical: parseInt(document.getElementById('verticalRes').value)
            };
            const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            canvas.width = newResolution.horizontal;
            canvas.height = newResolution.vertical;
            ctx.putImageData(imgData, 0, 0);
            saveState();
        }
    </script>
</body>
</html>
